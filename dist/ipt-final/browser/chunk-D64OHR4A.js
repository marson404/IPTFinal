import{a as A,b as I,c as O,d as V,e as W,f as N,h as T,i as k,j as D,l as L,n as q,o as B}from"./chunk-SWDTLJ4O.js";import{a as F}from"./chunk-WFMSKW4F.js";import{A as x,B as M,F as w,I as g,K as n,L as o,N as C,O as h,P as d,T as y,U as r,W as b,Y as p,Z as f,_,la as P,na as v,ra as S,s as m,t as u,ta as E,y as c}from"./chunk-RY5F4FTU.js";function U(s,l){if(s&1&&(n(0,"div",6),r(1),o()),s&2){let e=d();c(),b(" ",e.error," ")}}function z(s,l){s&1&&(n(0,"div",7),r(1," Loading... "),o())}function j(s,l){s&1&&(n(0,"small",37),r(1," Password must be at least 6 characters long "),o())}function G(s,l){s&1&&(n(0,"small",41),r(1," Passwords do not match "),o())}function H(s,l){if(s&1){let e=C();n(0,"div",9)(1,"label",38),r(2,"Confirm New Password"),o(),n(3,"input",39),_("ngModelChange",function(t){m(e);let a=d(2);return f(a.confirmPassword,t)||(a.confirmPassword=t),u(t)}),o(),w(4,G,2,0,"small",40),o()}if(s&2){let e=d(2);c(3),p("ngModel",e.confirmPassword),g("required",e.newPassword.length>0),c(),g("ngIf",e.newPassword&&e.confirmPassword&&e.newPassword!==e.confirmPassword)}}function J(s,l){if(s&1){let e=C();n(0,"form",8,0),h("ngSubmit",function(){m(e);let t=d();return u(t.onSubmit())}),n(2,"div",9)(3,"label",10),r(4,"Title"),o(),n(5,"select",11),_("ngModelChange",function(t){m(e);let a=d();return f(a.account.title,t)||(a.account.title=t),u(t)}),n(6,"option",12),r(7,"Mr"),o(),n(8,"option",13),r(9,"Mrs"),o(),n(10,"option",14),r(11,"Ms"),o(),n(12,"option",15),r(13,"Dr"),o()()(),n(14,"div",9)(15,"label",16),r(16,"First Name"),o(),n(17,"input",17),_("ngModelChange",function(t){m(e);let a=d();return f(a.account.first_name,t)||(a.account.first_name=t),u(t)}),o()(),n(18,"div",9)(19,"label",18),r(20,"Last Name"),o(),n(21,"input",19),_("ngModelChange",function(t){m(e);let a=d();return f(a.account.last_name,t)||(a.account.last_name=t),u(t)}),o()(),n(22,"div",9)(23,"label",20),r(24,"Email"),o(),n(25,"input",21),_("ngModelChange",function(t){m(e);let a=d();return f(a.account.email,t)||(a.account.email=t),u(t)}),o()(),n(26,"div",9)(27,"label",22),r(28,"Role"),o(),n(29,"select",23),_("ngModelChange",function(t){m(e);let a=d();return f(a.account.role,t)||(a.account.role=t),u(t)}),n(30,"option",24),r(31,"Admin"),o(),n(32,"option",25),r(33,"User"),o()()(),n(34,"div",9)(35,"label",26),r(36,"Status"),o(),n(37,"select",27),_("ngModelChange",function(t){m(e);let a=d();return f(a.account.status,t)||(a.account.status=t),u(t)}),n(38,"option",28),r(39,"Active"),o(),n(40,"option",29),r(41,"Inactive"),o()()(),n(42,"div",9)(43,"label",30),r(44,"New Password (leave empty to keep current)"),o(),n(45,"input",31),_("ngModelChange",function(t){m(e);let a=d();return f(a.newPassword,t)||(a.newPassword=t),u(t)}),o(),w(46,j,2,0,"small",32),o(),w(47,H,5,3,"div",33),n(48,"div",34)(49,"button",35),r(50),o(),n(51,"button",36),h("click",function(){m(e);let t=d();return u(t.cancel())}),r(52," Cancel "),o()()()}if(s&2){let e=y(1),i=d();c(5),p("ngModel",i.account.title),c(12),p("ngModel",i.account.first_name),c(4),p("ngModel",i.account.last_name),c(4),p("ngModel",i.account.email),c(4),p("ngModel",i.account.role),c(8),p("ngModel",i.account.status),c(8),p("ngModel",i.newPassword),c(),g("ngIf",i.newPassword),c(),g("ngIf",i.newPassword),c(2),g("disabled",!e.form.valid||i.submitting||i.newPassword&&i.newPassword!==i.confirmPassword),c(),b(" ",i.submitting?"Saving...":"Save Changes"," ")}}var R=class s{constructor(l,e,i){this.router=l;this.route=e;this.accountService=i}account={id:0,title:"Mr",first_name:"",last_name:"",email:"",role:"User",status:"Active"};newPassword="";confirmPassword="";loading=!1;submitting=!1;error="";ngOnInit(){this.loading=!0;let l=Number(this.route.snapshot.paramMap.get("id"));l?this.accountService.getById(l).subscribe({next:e=>{this.account=e,this.loading=!1},error:e=>{this.error=e.message,this.loading=!1}}):(this.error="No account ID provided",this.loading=!1)}onSubmit(){if(!this.account.id){this.error="Invalid account ID";return}if(this.newPassword&&this.newPassword!==this.confirmPassword){this.error="Passwords do not match";return}if(this.newPassword&&this.newPassword.length<6){this.error="Password must be at least 6 characters long";return}this.submitting=!0,this.error="",console.log("Submitting update for account:",this.account.id);let l={title:this.account.title,first_name:this.account.first_name,last_name:this.account.last_name,role:this.account.role,status:this.account.status,email:this.account.email};this.newPassword&&(l.password=this.newPassword),console.log("Update data:",l),this.accountService.update(this.account.id,l).subscribe({next:e=>{console.log("Update successful:",e),this.router.navigate(["/accounts"])},error:e=>{console.error("Update failed:",e),this.error=e.message||"Failed to update account",this.submitting=!1}})}cancel(){this.router.navigate(["/accounts"])}static \u0275fac=function(e){return new(e||s)(x(E),x(S),x(F))};static \u0275cmp=M({type:s,selectors:[["app-account-edit"]],decls:7,vars:3,consts:[["accountForm","ngForm"],[1,"card"],[1,"card-header"],["class","alert alert-danger",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","card-body",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger"],[1,"loading-spinner"],[1,"card-body",3,"ngSubmit"],[1,"form-group"],["for","title"],["id","title","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Mr"],["value","Mrs"],["value","Ms"],["value","Dr"],["for","firstName"],["type","text","id","firstName","name","firstName","required","","placeholder","Enter first name",1,"form-control",3,"ngModelChange","ngModel"],["for","lastName"],["type","text","id","lastName","name","lastName","required","","placeholder","Enter last name",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","required","","placeholder","Enter email",1,"form-control",3,"ngModelChange","ngModel"],["for","role"],["id","role","name","role","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Admin"],["value","User"],["for","status"],["id","status","name","status","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],["for","password"],["type","password","id","password","name","password","placeholder","Enter new password","minlength","6",1,"form-control",3,"ngModelChange","ngModel"],["class","form-text text-muted",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-text","text-muted"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm new password",1,"form-control",3,"ngModelChange","ngModel","required"],["class","form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"]],template:function(e,i){e&1&&(n(0,"div",1)(1,"div",2)(2,"h2"),r(3,"Edit Account"),o()(),w(4,U,2,1,"div",3)(5,z,2,0,"div",4)(6,J,53,11,"form",5),o()),e&2&&(c(4),g("ngIf",i.error),c(),g("ngIf",i.loading),c(),g("ngIf",!i.loading))},dependencies:[v,P,B,N,k,D,A,T,I,O,L,q,W,V],styles:[".card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin:1rem}.card-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #eee}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.5rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.form-actions[_ngcontent-%COMP%]{margin-top:2rem;display:flex;gap:1rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:4px;margin-bottom:1rem}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}.form-text[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.25rem}.text-muted[_ngcontent-%COMP%]{color:#6c757d}.text-danger[_ngcontent-%COMP%]{color:#dc3545}"]})};export{R as AccountEditComponent};
