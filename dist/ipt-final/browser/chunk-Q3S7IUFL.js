import{f as s,i as r,k as o,n as a,pa as l,q as p,ya as d}from"./chunk-RY5F4FTU.js";var m=class i{constructor(e){this.http=e}apiUrl=`${d.apiUrl}/api/workflows`;handleError(e){let t="An error occurred";return e.error instanceof ErrorEvent?t=e.error.message:t=e.error.message||e.error.error||e.message,console.error("Workflow service error:",e),s(()=>t)}getWorkflowsByEmployeeId(e){return this.http.get(`${this.apiUrl}/employee/${e}`).pipe(o(t=>console.log("Fetched workflows:",t)),r(this.handleError))}getWorkflowById(e){return this.http.get(`${this.apiUrl}/${e}`).pipe(o(t=>console.log("Fetched workflow:",t)),r(this.handleError))}createWorkflow(e){return this.http.post(this.apiUrl,e).pipe(o(t=>console.log("Created workflow:",t)),r(this.handleError))}updateWorkflow(e,t){return this.http.put(`${this.apiUrl}/${e}`,t).pipe(o(n=>console.log("Updated workflow:",n)),r(this.handleError))}deleteWorkflow(e){return this.http.delete(`${this.apiUrl}/${e}`).pipe(o(()=>console.log("Deleted workflow:",e)),r(this.handleError))}updateWorkflowStatus(e,t){return this.http.patch(`${this.apiUrl}/${e}/status`,{status:t}).pipe(o(n=>console.log("Updated workflow status:",n)),r(this.handleError))}updateWorkflowStep(e,t){return this.http.patch(`${this.apiUrl}/${e}/step`,{current_step:t}).pipe(o(n=>console.log("Updated workflow step:",n)),r(this.handleError))}createOnboardingWorkflow(e,t){let n=[{step_name:"HR Documentation",status:"pending",assigned_department:"HR",due_date:new Date(Date.now()+864e5).toISOString()},{step_name:"IT Setup",status:"pending",assigned_department:"IT",due_date:new Date(Date.now()+1728e5).toISOString()},{step_name:"Department Orientation",status:"pending",assigned_department:"Department Head",due_date:new Date(Date.now()+2592e5).toISOString()}],u={employee_id:e,request_id:t,current_step:"HR Documentation",status:"pending",request_type:"Newly Hired",request_items:JSON.stringify({required_documents:["Government ID","SSS/TIN","Employment Contract","Confidentiality Agreement"]}),onboarding_steps:n,orientation_date:new Date(Date.now()+3*24*60*60*1e3).toISOString(),department_orientation_completed:!1,it_setup_completed:!1,hr_documentation_completed:!1};return this.createWorkflow(u)}static \u0275fac=function(t){return new(t||i)(p(l))};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};export{m as a};
