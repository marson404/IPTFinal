import{a as k}from"./chunk-EIQSXQVF.js";import{A as x,B as C,F as c,I as l,K as n,L as r,M as s,N as h,O as f,P as m,U as o,V as p,W as v,ca as O,da as D,ka as M,la as P,ma as y,na as S,s as b,t as _,ta as E,y as a}from"./chunk-RY5F4FTU.js";function w(i,e){if(i&1&&(n(0,"div",10),o(1),r()),i&2){let t=m();a(),v(" ",t.error," ")}}function T(i,e){i&1&&(n(0,"div",11),s(1,"i",12),o(2," Loading... "),r())}function N(i,e){if(i&1){let t=h();n(0,"tr")(1,"td"),o(2),r(),n(3,"td"),o(4),r(),n(5,"td")(6,"span",15),o(7),r()(),n(8,"td"),o(9),O(10,"date"),r(),n(11,"td",16)(12,"button",8),f("click",function(){let g=b(t).$implicit,u=m(2);return _(u.editDepartment(g.id))}),s(13,"i",17),o(14," Edit "),r(),n(15,"button",18),f("click",function(){let g=b(t).$implicit,u=m(2);return _(u.deleteDepartment(g.id))}),s(16,"i",19),o(17," Delete "),r()()()}if(i&2){let t=e.$implicit;a(2),p(t.name),a(2),p(t.description),a(3),p(t.employeeCount||0),a(2),p(D(10,4,t.created_at,"medium"))}}function A(i,e){if(i&1&&(n(0,"table",13)(1,"thead")(2,"tr")(3,"th"),o(4,"Name"),r(),n(5,"th"),o(6,"Description"),r(),n(7,"th"),o(8,"Employee Count"),r(),n(9,"th"),o(10,"Created At"),r(),n(11,"th"),o(12,"Actions"),r()()(),n(13,"tbody"),c(14,N,18,7,"tr",14),r()()),i&2){let t=m();a(14),l("ngForOf",t.departments)}}function V(i,e){i&1&&(n(0,"div",20),o(1," No departments found. "),r())}var I=class i{constructor(e,t){this.router=e;this.departmentService=t;console.log("DepartmentsComponent initialized")}departments=[];loading=!1;error="";ngOnInit(){console.log("DepartmentsComponent ngOnInit"),this.loadDepartments()}loadDepartments(){console.log("Loading departments..."),this.loading=!0,this.error="",this.departmentService.getAll().subscribe({next:e=>{console.log("Departments loaded successfully:",e),this.departments=e,this.loading=!1},error:e=>{console.error("Error loading departments:",e),this.error=e.message||"Error loading departments",this.loading=!1,e.status===404&&(this.error="Could not connect to the server. Please ensure the backend server is running.")}})}editDepartment(e){console.log("Navigating to edit department:",e),this.router.navigate(["/departments/edit",e])}addDepartment(){console.log("Navigating to add department"),this.router.navigate(["/departments/add"])}deleteDepartment(e){console.log("Attempting to delete department:",e),confirm("Are you sure you want to delete this department?")&&(this.loading=!0,this.error="",this.departmentService.delete(e).subscribe({next:()=>{console.log("Department deleted successfully:",e),this.loadDepartments()},error:t=>{console.error("Error deleting department:",t),this.error=t.message||"Error deleting department",this.loading=!1,t.status===404&&(this.error="Could not connect to the server. Please ensure the backend server is running.")}}))}static \u0275fac=function(t){return new(t||i)(x(E),x(k))};static \u0275cmp=C({type:i,selectors:[["app-departments"]],decls:13,vars:4,consts:[[1,"card"],[1,"card-header"],["class","alert alert-danger",4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"card-body"],["class","data-table",4,"ngIf"],["class","no-records",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"alert","alert-danger"],[1,"loading-spinner"],[1,"icon","fas","fa-spinner","fa-spin"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"badge","badge-primary"],[1,"action-buttons"],[1,"fas","fa-edit"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash"],[1,"no-records"]],template:function(t,d){t&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Departments Management"),r()(),c(4,w,2,1,"div",2)(5,T,3,0,"div",3),n(6,"div",4),c(7,A,15,1,"table",5),r(),c(8,V,2,0,"div",6),n(9,"div",7)(10,"button",8),f("click",function(){return d.addDepartment()}),s(11,"i",9),o(12," Add Department "),r()()()),t&2&&(a(4),l("ngIf",d.error),a(),l("ngIf",d.loading),a(2),l("ngIf",!d.loading&&d.departments.length>0),a(),l("ngIf",!d.loading&&d.departments.length===0))},dependencies:[S,M,P,y],styles:[".card[_ngcontent-%COMP%]{max-width:1200px;margin-top:25px;margin:2rem auto;padding:1.5rem 2rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a;display:flex;flex-direction:column;gap:1rem}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-weight:400;color:#222;font-size:1.75rem;border-bottom:1.5px solid #ccc;padding-bottom:.5rem}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:1rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f3f4f6}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px 15px;text-align:left}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1;cursor:pointer}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#007bff;border:none;color:#fff;padding:6px 12px;border-radius:5px;font-weight:600;cursor:pointer;transition:background-color .2s ease;margin-right:8px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}.action-buttons[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545}.action-buttons[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:1rem}.btn-primary[_ngcontent-%COMP%]{background-color:#28a745;border:none;color:#fff;padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;transition:background-color .2s ease}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#19692c}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;font-size:1.1rem}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:6px;margin-bottom:1rem}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.no-records[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;font-style:italic}"]})};export{I as DepartmentsComponent};
