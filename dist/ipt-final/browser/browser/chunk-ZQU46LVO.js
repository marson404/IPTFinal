import{a as J}from"./chunk-INEJZO7B.js";import{a as T,b as A,c as W,d as N,e as q,f as j,h as z,i as B,j as L,l as R,o as H}from"./chunk-SWDTLJ4O.js";import{a as G}from"./chunk-WFMSKW4F.js";import{a as U}from"./chunk-6ET2QAO6.js";import{A as y,B as w,F as s,I as c,J as v,K as n,L as t,N as P,O as M,P as p,T as u,U as a,V as O,W as S,Y as b,Z as x,_ as h,ka as I,la as k,na as D,ra as F,s as g,t as f,ta as V,y as m}from"./chunk-RY5F4FTU.js";function Q(o,r){if(o&1&&(n(0,"div",11),a(1),t()),o&2){let e=p();m(),S(" ",e.error," ")}}function X(o,r){o&1&&(n(0,"div",12),a(1," Loading... "),t())}function Y(o,r){if(o&1&&(n(0,"option",34),a(1),t()),o&2){let e=r.$implicit;c("value",e),m(),S(" ",e," ")}}function Z(o,r){o&1&&(n(0,"div"),a(1,"Email is required"),t())}function $(o,r){if(o&1&&(n(0,"div",35),s(1,Z,2,0,"div",36),t()),o&2){p();let e=u(7);m(),c("ngIf",e.errors==null?null:e.errors.required)}}function ee(o,r){o&1&&(n(0,"div",35),a(1," Position is required "),t())}function te(o,r){if(o&1&&(n(0,"option",34),a(1),t()),o&2){let e=r.$implicit;c("value",e.id),m(),O(e.name)}}function ie(o,r){o&1&&(n(0,"div",35),a(1," Department is required "),t())}function ne(o,r){o&1&&(n(0,"div",35),a(1," Hire Date is required "),t())}function oe(o,r){o&1&&(n(0,"div",35),a(1," Status is required "),t())}function re(o,r){if(o&1){let e=P();n(0,"form",13,0),M("ngSubmit",function(){g(e);let i=p();return f(i.onSubmit())}),n(2,"div",14)(3,"div",15)(4,"label",16),a(5,"Email *"),t(),n(6,"select",17,1),h("ngModelChange",function(i){g(e);let d=p();return x(d.employee.email,i)||(d.employee.email=i),f(i)}),n(8,"option",18),a(9,"Select an email"),t(),s(10,Y,2,2,"option",19),t(),s(11,$,2,1,"div",20),t(),n(12,"div",15)(13,"label",21),a(14,"Position *"),t(),n(15,"input",22,2),h("ngModelChange",function(i){g(e);let d=p();return x(d.employee.position,i)||(d.employee.position=i),f(i)}),t(),s(17,ee,2,0,"div",20),t()(),n(18,"div",14)(19,"div",15)(20,"label",23),a(21,"Department *"),t(),n(22,"select",24,3),h("ngModelChange",function(i){g(e);let d=p();return x(d.employee.department_id,i)||(d.employee.department_id=i),f(i)}),M("ngModelChange",function(i){g(e);let d=p();return f(d.onDepartmentChange(i))}),n(24,"option",18),a(25,"Select department"),t(),s(26,te,2,2,"option",19),t(),s(27,ie,2,0,"div",20),t(),n(28,"div",15)(29,"label",25),a(30,"Hire Date *"),t(),n(31,"input",26,4),h("ngModelChange",function(i){g(e);let d=p();return x(d.employee.hire_date,i)||(d.employee.hire_date=i),f(i)}),t(),s(33,ne,2,0,"div",20),t()(),n(34,"div",14)(35,"div",15)(36,"label",27),a(37,"Status *"),t(),n(38,"select",28,5),h("ngModelChange",function(i){g(e);let d=p();return x(d.employee.status,i)||(d.employee.status=i),f(i)}),n(40,"option",18),a(41,"Select status"),t(),n(42,"option",29),a(43,"Active"),t(),n(44,"option",30),a(45,"Inactive"),t()(),s(46,oe,2,0,"div",20),t()(),n(47,"div",31)(48,"button",32),M("click",function(){g(e);let i=p();return f(i.cancel())}),a(49,"Cancel"),t(),n(50,"button",33),a(51,"Save Changes"),t()()()}if(o&2){let e=u(1),l=u(7),i=u(16),d=u(23),E=u(32),C=u(39),_=p();m(6),v("is-invalid",l.invalid&&l.touched),b("ngModel",_.employee.email),m(4),c("ngForOf",_.activeAccountEmails),m(),c("ngIf",l.invalid&&l.touched),m(4),v("is-invalid",i.invalid&&i.touched),b("ngModel",_.employee.position),m(2),c("ngIf",i.invalid&&i.touched),m(5),v("is-invalid",d.invalid&&d.touched),b("ngModel",_.employee.department_id),m(4),c("ngForOf",_.departments),m(),c("ngIf",d.invalid&&d.touched),m(4),v("is-invalid",E.invalid&&E.touched),b("ngModel",_.employee.hire_date),m(2),c("ngIf",E.invalid&&E.touched),m(5),v("is-invalid",C.invalid&&C.touched),b("ngModel",_.employee.status),m(8),c("ngIf",C.invalid&&C.touched),m(4),c("disabled",!e.form.valid)}}var K=class o{constructor(r,e,l,i,d){this.route=r;this.router=e;this.employeeService=l;this.departmentService=i;this.accountService=d}employee={id:0,email:"",position:"",department:"",department_id:0,hire_date:"",status:"Active"};departments=[];activeAccountEmails=[];loading=!1;error="";ngOnInit(){this.loading=!0,this.departmentService.getAll().subscribe({next:e=>{this.departments=e},error:e=>{this.error="Error loading departments: "+e.message}}),this.accountService.getAllActiveUsers().subscribe({next:e=>{this.activeAccountEmails=e.map(l=>l.email)},error:e=>{this.error="Error loading account emails: "+e.message}});let r=Number(this.route.snapshot.paramMap.get("id"));r?this.employeeService.getEmployeeById(r).subscribe({next:e=>{this.employee=e,this.loading=!1},error:e=>{this.error="Error loading employee: "+e.message,this.loading=!1}}):(this.error="No employee ID provided",this.loading=!1)}onDepartmentChange(r){let e=this.departments.find(l=>l.id===r);e&&(this.employee.department_id=r,this.employee.department=e.name)}onSubmit(){this.loading=!0,this.employeeService.updateEmployee(this.employee.id,this.employee).subscribe({next:()=>{this.router.navigate(["/employees"])},error:r=>{this.error="Error updating employee: "+r.message,this.loading=!1}})}cancel(){this.router.navigate(["/employees"])}static \u0275fac=function(e){return new(e||o)(y(F),y(V),y(J),y(U),y(G))};static \u0275cmp=w({type:o,selectors:[["app-edit-employee"]],decls:7,vars:3,consts:[["employeeForm","ngForm"],["emailField","ngModel"],["positionField","ngModel"],["departmentField","ngModel"],["hireDateField","ngModel"],["statusField","ngModel"],[1,"card"],[1,"card-header"],["class","alert alert-danger",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","form",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger"],[1,"loading-spinner"],[1,"form",3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["for","email"],["id","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","position"],["id","position","name","position","type","text","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","department"],["id","department","name","department","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","hireDate"],["id","hireDate","name","hireDate","type","date","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","status"],["id","status","name","status","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,l){e&1&&(n(0,"div",6)(1,"div",7)(2,"h2"),a(3,"Edit Employee"),t()(),s(4,Q,2,1,"div",8)(5,X,2,0,"div",9)(6,re,52,23,"form",10),t()),e&2&&(m(4),c("ngIf",l.error),m(),c("ngIf",l.loading),m(),c("ngIf",!l.loading&&l.employee))},dependencies:[D,I,k,H,j,B,L,T,z,A,W,R,q,N],styles:[`.employee-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:1rem}.employee-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .employee-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}.employee-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f2f2f2;text-align:left}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;padding:4px}.card[_ngcontent-%COMP%]{margin:20px auto;max-width:800px;background-color:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a}.card-header[_ngcontent-%COMP%]{padding:1rem;background-color:#f8f9fa;border-bottom:1px solid #dee2e6;border-radius:8px 8px 0 0}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.5rem}.form[_ngcontent-%COMP%]{padding:20px}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.form-group[_ngcontent-%COMP%]{flex:1}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}.form-control[_ngcontent-%COMP%]{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;padding-right:calc(1.5em + .75rem);background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.invalid-feedback[_ngcontent-%COMP%]{display:block;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem;padding-top:1rem;border-top:1px solid #dee2e6}.btn[_ngcontent-%COMP%]{display:inline-block;font-weight:400;text-align:center;vertical-align:middle;-webkit-user-select:none;user-select:none;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;cursor:pointer;border:1px solid transparent}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0069d9;border-color:#0062cc}.btn-secondary[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62}.alert[_ngcontent-%COMP%]{padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-danger[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#6c757d}`]})};export{K as EditEmployeeComponent};
