import{a as S}from"./chunk-JJSI5YBX.js";import{A as x,B as y,F as m,I as l,K as n,L as i,M as g,N as _,O as u,P as p,U as o,V as c,W as v,aa as O,ba as M,ca as h,da as C,ja as P,ka as q,la as w,ma as E,na as R,s as f,t as b,ta as I,y as a}from"./chunk-RY5F4FTU.js";var D=(r,t,e,s,d)=>({"badge-primary":r,"badge-warning":t,"badge-info resources-badge":e,"badge-success":s,"badge-secondary":d}),N=(r,t,e)=>({"badge-warning":r,"badge-success":t,"badge-danger":e});function V(r,t){if(r&1){let e=_();n(0,"div",12)(1,"p",13),o(2," Showing requests for: "),n(3,"span",14),o(4),i(),n(5,"button",15),u("click",function(){f(e);let d=p();return b(d.viewAllRequests())}),g(6,"i",16),o(7," View All Requests "),i()()()}if(r&2){let e=p();a(4),c(e.employeeEmail)}}function j(r,t){if(r&1&&(n(0,"div",17),o(1),i()),r&2){let e=p();a(),v(" ",e.error," ")}}function A(r,t){r&1&&(n(0,"div",18),g(1,"i",19),o(2," Loading... "),i())}function F(r,t){if(r&1){let e=_();n(0,"tr")(1,"td")(2,"span",22),o(3),i()(),n(4,"td"),o(5),i(),n(6,"td"),o(7),i(),n(8,"td")(9,"span",22),o(10),i()(),n(11,"td"),o(12),h(13,"date"),i(),n(14,"td"),o(15),h(16,"date"),i(),n(17,"td",23)(18,"button",10),u("click",function(){let d=f(e).$implicit,T=p(2);return b(T.editRequest(d.id))}),g(19,"i",24),o(20," Edit "),i()()()}if(r&2){let e=t.$implicit;a(2),l("ngClass",M(14,D,e.type==="Leave",e.type==="Equipment",e.type==="Resources",e.type==="Onboarding",e.type==="Department Transfer")),a(),c(e.type),a(2),c(e.employee_email),a(2),c(e.items),a(2),l("ngClass",O(20,N,e.status==="Pending",e.status==="Approved",e.status==="Rejected")),a(),c(e.status),a(2),c(C(13,8,e.submission_date,"medium")),a(3),c(C(16,11,e.last_updated,"medium"))}}function z(r,t){if(r&1&&(n(0,"table",20)(1,"thead")(2,"tr")(3,"th"),o(4,"Type"),i(),n(5,"th"),o(6,"Employee"),i(),n(7,"th"),o(8,"Items"),i(),n(9,"th"),o(10,"Status"),i(),n(11,"th"),o(12,"Submission Date"),i(),n(13,"th"),o(14,"Last Updated"),i(),n(15,"th"),o(16,"Actions"),i()()(),n(17,"tbody"),m(18,F,21,24,"tr",21),i()()),r&2){let e=p();a(18),l("ngForOf",e.requests)}}function L(r,t){r&1&&(n(0,"div",25),o(1," No requests found. "),i())}var k=class r{constructor(t,e){this.router=t;this.requestService=e;let d=this.router.getCurrentNavigation()?.extras.state;d?.employeeId&&d?.employeeEmail&&(this.employeeId=d.employeeId,this.employeeEmail=d.employeeEmail)}requests=[];loading=!1;error="";employeeId=null;employeeEmail=null;formatDetails(t){return t.type==="Department Transfer"?"Department Transfer Request":t.type==="Onboarding"?"Newly hire":t.items}ngOnInit(){this.loadRequests()}loadRequests(){this.loading=!0,this.employeeId?this.requestService.getRequestsByEmployeeId(this.employeeId).subscribe({next:t=>{this.requests=t.filter(e=>["Resources","Equipment","Leave"].includes(e.type)),this.loading=!1},error:t=>{this.error="Error loading requests: "+t.message,this.loading=!1}}):this.requestService.getAllRequests().subscribe({next:t=>{this.requests=t.filter(e=>["Resources","Equipment","Leave"].includes(e.type)),this.loading=!1},error:t=>{this.error="Error loading requests: "+t.message,this.loading=!1}})}editRequest(t){this.router.navigate(["/requests/edit",t])}addRequest(){this.employeeId&&this.employeeEmail?this.router.navigate(["/requests/add"],{state:{employeeId:this.employeeId,employeeEmail:this.employeeEmail}}):this.router.navigate(["/requests/add"])}viewAllRequests(){this.employeeId=null,this.employeeEmail=null,this.router.navigate(["/requests"],{skipLocationChange:!1,replaceUrl:!0}).then(()=>{this.loadRequests()})}static \u0275fac=function(e){return new(e||r)(x(I),x(S))};static \u0275cmp=y({type:r,selectors:[["app-requests"]],decls:15,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"header-content"],["class","header-actions",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","loading-spinner",4,"ngIf"],[1,"card-body"],["class","data-table",4,"ngIf"],["class","no-records",4,"ngIf"],[1,"card-footer"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-plus"],[1,"header-actions"],[1,"text-muted"],[1,"badge","badge-primary"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-list"],[1,"alert","alert-danger"],[1,"loading-spinner"],[1,"icon","fas","fa-spinner","fa-spin"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"action-buttons"],[1,"fas","fa-edit"],[1,"no-records"]],template:function(e,s){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),o(4,"Requests Management"),i(),m(5,V,8,1,"div",3),i()(),m(6,j,2,1,"div",4)(7,A,3,0,"div",5),n(8,"div",6),m(9,z,19,1,"table",7)(10,L,2,0,"div",8),i(),n(11,"div",9)(12,"button",10),u("click",function(){return s.addRequest()}),g(13,"i",11),o(14," Add Request "),i()()()),e&2&&(a(5),l("ngIf",s.employeeEmail),a(),l("ngIf",s.error),a(),l("ngIf",s.loading),a(2),l("ngIf",!s.loading&&s.requests.length>0),a(),l("ngIf",!s.loading&&s.requests.length===0))},dependencies:[R,P,q,w,E],styles:[".card[_ngcontent-%COMP%]{max-width:1200px;margin-top:25px;margin:2rem auto;padding:1.5rem 2rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a;display:flex;flex-direction:column;gap:1rem}.card-header[_ngcontent-%COMP%]{border-radius:8px 8px 0 0}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:400;color:#222;font-size:1.75rem;border-bottom:1.5px solid #ccc;padding-bottom:.5rem}.header-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:1rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333;margin-top:0}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f3f4f6}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:12px 15px;text-align:left}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1;transition:background-color .2s ease}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px}.card-body[_ngcontent-%COMP%]{overflow-x:auto}.edit-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:8px 16px;border:none;border-radius:6px;cursor:pointer;font-weight:500;font-size:.9rem;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.card-footer[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #e0e0e0;display:flex;justify-content:flex-end}.add-btn[_ngcontent-%COMP%]{background-color:#28a745;border:none;color:#fff;padding:10px 20px;border-radius:6px;font-weight:600;font-size:.95rem;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.add-btn[_ngcontent-%COMP%]:hover{background-color:#19692c;transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;font-size:1.1rem}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:6px;margin-bottom:1rem}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.no-records[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;font-style:italic}@media (max-width: 600px){.card[_ngcontent-%COMP%]{padding:1rem;margin:1rem}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;font-size:.9rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:4px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.header-buttons[_ngcontent-%COMP%]{width:100%;justify-content:center}}.details-cell[_ngcontent-%COMP%]{min-width:200px;white-space:normal;word-wrap:break-word}.status-pending[_ngcontent-%COMP%]{color:#ffc107;font-weight:500}.status-approved[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.status-rejected[_ngcontent-%COMP%]{color:#dc3545;font-weight:500}.resources-badge[_ngcontent-%COMP%]{background-color:#17a2b8;color:#fff;padding:6px 12px;border-radius:20px;font-weight:500;display:inline-block}",".header-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:1rem}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:1rem 0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border:1px solid #dee2e6}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:500}.badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:4px;font-weight:400}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:4px;margin-right:.5rem}.btn[_ngcontent-%COMP%]:last-child{margin-right:0}"]})};export{k as RequestsComponent};
