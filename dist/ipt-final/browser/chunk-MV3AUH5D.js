import{a as I,b as k,c as N,d as V,e as F,f as T,l as R,o as q}from"./chunk-SWDTLJ4O.js";import{a as W}from"./chunk-EIQSXQVF.js";import{A as f,B as M,F as u,I as p,J as _,K as r,L as n,N as y,O as x,P as c,T as b,U as d,V as S,W as E,Y as v,Z as C,_ as h,la as D,na as P,ra as O,s,t as g,ta as w,y as m}from"./chunk-RY5F4FTU.js";function A(o,a){if(o&1&&(r(0,"div",8),d(1),n()),o&2){let e=c();m(),E(" ",e.error," ")}}function z(o,a){o&1&&(r(0,"div",9),d(1," Loading... "),n())}function B(o,a){o&1&&(r(0,"div",21),d(1," Department name is required "),n())}function L(o,a){o&1&&(r(0,"div",21),d(1," Description is required "),n())}function G(o,a){if(o&1){let e=y();r(0,"form",10,0),x("ngSubmit",function(){s(e);let t=c();return g(t.save())}),r(2,"div",11)(3,"label",12),d(4,"Department Name *"),n(),r(5,"input",13,1),h("ngModelChange",function(t){s(e);let l=c();return C(l.department.name,t)||(l.department.name=t),g(t)}),n(),u(7,B,2,0,"div",14),n(),r(8,"div",11)(9,"label",15),d(10,"Department Description *"),n(),r(11,"textarea",16,2),h("ngModelChange",function(t){s(e);let l=c();return C(l.department.description,t)||(l.department.description=t),g(t)}),n(),u(13,L,2,0,"div",14),n(),r(14,"div",11)(15,"label"),d(16,"Current Employee Count"),n(),r(17,"p",17),d(18),n()(),r(19,"div",18)(20,"button",19),x("click",function(){s(e);let t=c();return g(t.cancel())}),d(21,"Cancel"),n(),r(22,"button",20),d(23," Save Changes "),n()()()}if(o&2){let e=b(6),i=b(12),t=c();m(5),_("is-invalid",e.invalid&&e.touched||t.formSubmitted&&e.invalid),v("ngModel",t.department.name),m(2),p("ngIf",e.invalid&&e.touched||t.formSubmitted&&e.invalid),m(4),_("is-invalid",i.invalid&&i.touched||t.formSubmitted&&i.invalid),v("ngModel",t.department.description),m(2),p("ngIf",i.invalid&&i.touched||t.formSubmitted&&i.invalid),m(5),S(t.department.employeeCount),m(4),p("disabled",t.loading)}}var j=class o{constructor(a,e,i){this.router=a;this.route=e;this.departmentService=i}department={name:"",description:"",employeeCount:0};loading=!1;error="";formSubmitted=!1;ngOnInit(){let a=Number(this.route.snapshot.paramMap.get("id"));a?(this.loading=!0,this.error="",this.departmentService.getById(a).subscribe({next:e=>{this.department=e,this.loading=!1},error:e=>{this.error=e.error?.message||"Failed to load department",this.loading=!1,e.status===404&&this.router.navigate(["/departments"])}})):this.router.navigate(["/departments"])}save(){if(this.formSubmitted=!0,this.error="",!this.department.name?.trim()||!this.department.description?.trim()){this.error="Name and description are required";return}this.loading=!0,this.departmentService.update(this.department.id,{name:this.department.name.trim(),description:this.department.description.trim()}).subscribe({next:()=>{this.router.navigate(["/departments"])},error:a=>{this.error=a.error?.message||"Failed to update department",this.loading=!1}})}cancel(){this.router.navigate(["/departments"])}static \u0275fac=function(e){return new(e||o)(f(w),f(O),f(W))};static \u0275cmp=M({type:o,selectors:[["app-edit-department"]],decls:7,vars:3,consts:[["departmentForm","ngForm"],["nameField","ngModel"],["descField","ngModel"],[1,"card"],[1,"card-header"],["class","alert alert-danger",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","form",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger"],[1,"loading-spinner"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","name"],["id","name","name","name","type","text","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","description"],["id","description","name","description","required","","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-control-static"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"]],template:function(e,i){e&1&&(r(0,"div",3)(1,"div",4)(2,"h2"),d(3,"Edit Department"),n()(),u(4,A,2,1,"div",5)(5,z,2,0,"div",6)(6,G,24,10,"form",7),n()),e&2&&(m(4),p("ngIf",i.error),m(),p("ngIf",i.loading),m(),p("ngIf",!i.loading))},dependencies:[P,D,q,T,I,k,N,R,F,V],styles:[".card[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.card-header[_ngcontent-%COMP%]{margin-bottom:20px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#5a6268}.alert[_ngcontent-%COMP%]{padding:12px;border-radius:4px;margin-bottom:20px}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}"]})};export{j as EditDepartmentComponent};
