import{a as I,b as O,c as V,d as W,e as N,f as T,h as k,i as D,j as L,l as q,n as B,o as R}from"./chunk-SWDTLJ4O.js";import{a as F}from"./chunk-ZAOS4JY5.js";import{A as x,B as y,F as w,I as g,K as n,L as o,N as C,O as h,P as d,T as P,U as r,W as b,Y as p,Z as f,_,a as M,la as v,na as S,ra as E,s as m,t as u,ta as A,y as c}from"./chunk-RY5F4FTU.js";function z(l,s){if(l&1&&(n(0,"div",6),r(1),o()),l&2){let t=d();c(),b(" ",t.error," ")}}function j(l,s){l&1&&(n(0,"div",7),r(1," Loading... "),o())}function G(l,s){l&1&&(n(0,"small",37),r(1," Password must be at least 6 characters long "),o())}function H(l,s){l&1&&(n(0,"small",41),r(1," Passwords do not match "),o())}function J(l,s){if(l&1){let t=C();n(0,"div",9)(1,"label",38),r(2,"Confirm New Password"),o(),n(3,"input",39),_("ngModelChange",function(e){m(t);let a=d(2);return f(a.confirmPassword,e)||(a.confirmPassword=e),u(e)}),o(),w(4,H,2,0,"small",40),o()}if(l&2){let t=d(2);c(3),p("ngModel",t.confirmPassword),g("required",t.newPassword.length>0),c(),g("ngIf",t.newPassword&&t.confirmPassword&&t.newPassword!==t.confirmPassword)}}function K(l,s){if(l&1){let t=C();n(0,"form",8,0),h("ngSubmit",function(){m(t);let e=d();return u(e.onSubmit())}),n(2,"div",9)(3,"label",10),r(4,"Title"),o(),n(5,"select",11),_("ngModelChange",function(e){m(t);let a=d();return f(a.account.title,e)||(a.account.title=e),u(e)}),n(6,"option",12),r(7,"Mr"),o(),n(8,"option",13),r(9,"Mrs"),o(),n(10,"option",14),r(11,"Ms"),o(),n(12,"option",15),r(13,"Dr"),o()()(),n(14,"div",9)(15,"label",16),r(16,"First Name"),o(),n(17,"input",17),_("ngModelChange",function(e){m(t);let a=d();return f(a.account.first_name,e)||(a.account.first_name=e),u(e)}),o()(),n(18,"div",9)(19,"label",18),r(20,"Last Name"),o(),n(21,"input",19),_("ngModelChange",function(e){m(t);let a=d();return f(a.account.last_name,e)||(a.account.last_name=e),u(e)}),o()(),n(22,"div",9)(23,"label",20),r(24,"Email"),o(),n(25,"input",21),_("ngModelChange",function(e){m(t);let a=d();return f(a.account.email,e)||(a.account.email=e),u(e)}),o()(),n(26,"div",9)(27,"label",22),r(28,"Role"),o(),n(29,"select",23),_("ngModelChange",function(e){m(t);let a=d();return f(a.account.role,e)||(a.account.role=e),u(e)}),n(30,"option",24),r(31,"Admin"),o(),n(32,"option",25),r(33,"User"),o()()(),n(34,"div",9)(35,"label",26),r(36,"Status"),o(),n(37,"select",27),_("ngModelChange",function(e){m(t);let a=d();return f(a.account.status,e)||(a.account.status=e),u(e)}),n(38,"option",28),r(39,"Active"),o(),n(40,"option",29),r(41,"Inactive"),o()()(),n(42,"div",9)(43,"label",30),r(44,"New Password (leave empty to keep current)"),o(),n(45,"input",31),_("ngModelChange",function(e){m(t);let a=d();return f(a.newPassword,e)||(a.newPassword=e),u(e)}),o(),w(46,G,2,0,"small",32),o(),w(47,J,5,3,"div",33),n(48,"div",34)(49,"button",35),r(50),o(),n(51,"button",36),h("click",function(){m(t);let e=d();return u(e.cancel())}),r(52," Cancel "),o()()()}if(l&2){let t=P(1),i=d();c(5),p("ngModel",i.account.title),c(12),p("ngModel",i.account.first_name),c(4),p("ngModel",i.account.last_name),c(4),p("ngModel",i.account.email),c(4),p("ngModel",i.account.role),c(8),p("ngModel",i.account.status),c(8),p("ngModel",i.newPassword),c(),g("ngIf",i.newPassword),c(),g("ngIf",i.newPassword),c(2),g("disabled",!t.form.valid||i.submitting||i.newPassword&&i.newPassword!==i.confirmPassword),c(),b(" ",i.submitting?"Saving...":"Save Changes"," ")}}var U=class l{constructor(s,t,i){this.router=s;this.route=t;this.accountService=i}account={id:0,title:"Mr",first_name:"",last_name:"",email:"",role:"User",status:"Active"};newPassword="";confirmPassword="";loading=!1;submitting=!1;error="";ngOnInit(){this.loading=!0;let s=Number(this.route.snapshot.paramMap.get("id"));s?this.accountService.getById(s).subscribe({next:t=>{this.account=t,this.loading=!1},error:t=>{this.error=t.message,this.loading=!1}}):(this.error="No account ID provided",this.loading=!1)}onSubmit(){if(!this.account.id){this.error="Invalid account ID";return}if(this.newPassword&&this.newPassword!==this.confirmPassword){this.error="Passwords do not match";return}if(this.newPassword&&this.newPassword.length<6){this.error="Password must be at least 6 characters long";return}this.submitting=!0,this.error="";let s=M({},this.account);this.newPassword&&(s.password=this.newPassword),this.accountService.update(this.account.id,s).subscribe({next:()=>{this.router.navigate(["/accounts"])},error:t=>{this.error=t.message,this.submitting=!1}})}cancel(){this.router.navigate(["/accounts"])}static \u0275fac=function(t){return new(t||l)(x(A),x(E),x(F))};static \u0275cmp=y({type:l,selectors:[["app-account-edit"]],decls:7,vars:3,consts:[["accountForm","ngForm"],[1,"card"],[1,"card-header"],["class","alert alert-danger",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","card-body",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger"],[1,"loading-spinner"],[1,"card-body",3,"ngSubmit"],[1,"form-group"],["for","title"],["id","title","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Mr"],["value","Mrs"],["value","Ms"],["value","Dr"],["for","firstName"],["type","text","id","firstName","name","firstName","required","","placeholder","Enter first name",1,"form-control",3,"ngModelChange","ngModel"],["for","lastName"],["type","text","id","lastName","name","lastName","required","","placeholder","Enter last name",1,"form-control",3,"ngModelChange","ngModel"],["for","email"],["type","email","id","email","name","email","required","","placeholder","Enter email",1,"form-control",3,"ngModelChange","ngModel"],["for","role"],["id","role","name","role","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Admin"],["value","User"],["for","status"],["id","status","name","status","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Active"],["value","Inactive"],["for","password"],["type","password","id","password","name","password","placeholder","Enter new password","minlength","6",1,"form-control",3,"ngModelChange","ngModel"],["class","form-text text-muted",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-text","text-muted"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","placeholder","Confirm new password",1,"form-control",3,"ngModelChange","ngModel","required"],["class","form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"]],template:function(t,i){t&1&&(n(0,"div",1)(1,"div",2)(2,"h2"),r(3,"Edit Account"),o()(),w(4,z,2,1,"div",3)(5,j,2,0,"div",4)(6,K,53,11,"form",5),o()),t&2&&(c(4),g("ngIf",i.error),c(),g("ngIf",i.loading),c(),g("ngIf",!i.loading))},dependencies:[S,v,R,T,D,L,I,k,O,V,q,B,N,W],styles:[".card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin:1rem}.card-header[_ngcontent-%COMP%]{padding:1.5rem;border-bottom:1px solid #eee}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.5rem}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#555;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.form-actions[_ngcontent-%COMP%]{margin-top:2rem;display:flex;gap:1rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:4px;margin-bottom:1rem}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}.form-text[_ngcontent-%COMP%]{font-size:.875rem;margin-top:.25rem}.text-muted[_ngcontent-%COMP%]{color:#6c757d}.text-danger[_ngcontent-%COMP%]{color:#dc3545}"]})};export{U as AccountEditComponent};
