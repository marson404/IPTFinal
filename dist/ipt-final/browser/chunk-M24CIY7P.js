import{a as E,b as k,c as A,d as I,e as F,f as N,l as V,o as T}from"./chunk-SWDTLJ4O.js";import{a as q}from"./chunk-EIQSXQVF.js";import{A as _,B as y,F as f,I as p,J as b,K as o,L as r,N as D,O as x,P as l,T as u,U as d,W as S,Y as v,Z as C,_ as h,j as M,la as P,na as w,s,t as g,ta as O,y as a}from"./chunk-RY5F4FTU.js";function z(i,m){if(i&1&&(o(0,"div",8),d(1),r()),i&2){let e=l();a(),S(" ",e.error," ")}}function R(i,m){i&1&&(o(0,"div",9),d(1," Loading... "),r())}function j(i,m){i&1&&(o(0,"div",20),d(1," Department name is required "),r())}function L(i,m){i&1&&(o(0,"div",20),d(1," Description is required "),r())}function B(i,m){if(i&1){let e=D();o(0,"form",10,0),x("ngSubmit",function(){s(e);let t=u(1),c=l();return g(c.onSubmit(t))}),o(2,"div",11)(3,"label",12),d(4,"Department Name *"),r(),o(5,"input",13,1),h("ngModelChange",function(t){s(e);let c=l();return C(c.department.name,t)||(c.department.name=t),g(t)}),r(),f(7,j,2,0,"div",14),r(),o(8,"div",11)(9,"label",15),d(10,"Department Description *"),r(),o(11,"textarea",16,2),h("ngModelChange",function(t){s(e);let c=l();return C(c.department.description,t)||(c.department.description=t),g(t)}),r(),f(13,L,2,0,"div",14),r(),o(14,"div",17)(15,"button",18),x("click",function(){s(e);let t=l();return g(t.cancel())}),d(16,"Cancel"),r(),o(17,"button",19),d(18," Add Department "),r()()()}if(i&2){let e=u(6),n=u(12),t=l();a(5),b("is-invalid",e.invalid&&e.touched||t.formSubmitted&&e.invalid),v("ngModel",t.department.name),a(2),p("ngIf",e.invalid&&e.touched||t.formSubmitted&&e.invalid),a(4),b("is-invalid",n.invalid&&n.touched||t.formSubmitted&&n.invalid),v("ngModel",t.department.description),a(2),p("ngIf",n.invalid&&n.touched||t.formSubmitted&&n.invalid),a(4),p("disabled",t.loading)}}var W=class i{constructor(m,e){this.router=m;this.departmentService=e}department={name:"",description:""};loading=!1;error="";formSubmitted=!1;validateDepartment(){return!this.department.name||!this.department.description?"Name and description are required":this.department.name.trim().length<2?"Department name must be at least 2 characters long":this.department.description.trim().length<10?"Description must be at least 10 characters long":null}onSubmit(m){if(this.formSubmitted=!0,this.error="",!m.valid)return;let e=this.validateDepartment();if(e){this.error=e;return}this.loading=!0;let n={name:this.department.name.trim(),description:this.department.description.trim()};console.log("Submitting department:",n),this.departmentService.create(n).pipe(M(()=>this.loading=!1)).subscribe({next:()=>{console.log("Department created successfully"),this.router.navigate(["/departments"])},error:t=>{console.error("Error creating department:",t),this.error=t.message||"Failed to create department. Please try again."}})}cancel(){this.router.navigate(["/departments"])}static \u0275fac=function(e){return new(e||i)(_(O),_(q))};static \u0275cmp=y({type:i,selectors:[["app-add-department"]],decls:7,vars:3,consts:[["departmentForm","ngForm"],["nameField","ngModel"],["descField","ngModel"],[1,"card"],[1,"card-header"],["class","alert alert-danger",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","form",3,"ngSubmit",4,"ngIf"],[1,"alert","alert-danger"],[1,"loading-spinner"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","name"],["id","name","name","name","type","text","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","description"],["id","description","name","description","required","","rows","3",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"invalid-feedback"]],template:function(e,n){e&1&&(o(0,"div",3)(1,"div",4)(2,"h2"),d(3,"Add Department"),r()(),f(4,z,2,1,"div",5)(5,R,2,0,"div",6)(6,B,19,9,"form",7),r()),e&2&&(a(4),p("ngIf",n.error),a(),p("ngIf",n.loading),a(),p("ngIf",!n.loading))},dependencies:[w,P,T,N,E,k,A,V,F,I],styles:[".card[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.card-header[_ngcontent-%COMP%]{margin-bottom:20px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.form-control.is-invalid[_ngcontent-%COMP%]{border-color:#dc3545}.invalid-feedback[_ngcontent-%COMP%]{color:#dc3545;font-size:12px;margin-top:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#5a6268}.alert[_ngcontent-%COMP%]{padding:12px;border-radius:4px;margin-bottom:20px}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}"]})};export{W as AddDepartmentComponent};
