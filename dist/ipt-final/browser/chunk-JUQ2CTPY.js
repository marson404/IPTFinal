import{a as L}from"./chunk-Q3S7IUFL.js";import{a as D}from"./chunk-INEJZO7B.js";import{b as A,e as z,h as F,i as B,j as V,o as U}from"./chunk-SWDTLJ4O.js";import{A as g,B as M,F as _,I as s,K as t,L as n,M as P,N as k,O as x,P as m,U as o,V as p,W as b,Y as h,Z as y,_ as v,aa as S,ba as E,ca as C,da as w,ja as I,ka as W,la as j,ma as N,na as q,ra as R,s as f,t as u,ta as T,v as O,y as a}from"./chunk-RY5F4FTU.js";var J=(i,r,e,d,l)=>({"badge-primary":i,"badge-warning":r,"badge-info":e,"badge-success":d,"badge-secondary transfer-badge":l}),K=(i,r,e)=>({"badge-warning":i,"badge-success":r,"badge-danger":e});function Y(i,r){if(i&1&&(t(0,"div",10),o(1),n()),i&2){let e=m();a(),b(" ",e.error," ")}}function $(i,r){i&1&&(t(0,"div",11),P(1,"i",12),o(2," Loading... "),n())}function H(i,r){if(i&1){let e=k();t(0,"tr")(1,"td")(2,"span",15),o(3),n()(),t(4,"td"),o(5),n(),t(6,"td"),o(7),n(),t(8,"td")(9,"span",15),o(10),n()(),t(11,"td"),o(12),C(13,"date"),n(),t(14,"td"),o(15),C(16,"date"),n(),t(17,"td")(18,"select",16),v("ngModelChange",function(l){let c=f(e).$implicit;return y(c.status,l)||(c.status=l),u(l)}),x("change",function(){let l=f(e).$implicit,c=m(2);return u(c.updateStatus(l))}),t(19,"option",17),o(20,"Pending"),n(),t(21,"option",18),o(22,"Approved"),n(),t(23,"option",19),o(24,"Rejected"),n()()()()}if(i&2){let e=r.$implicit;a(2),s("ngClass",E(15,J,e.request_type==="Leave",e.request_type==="Equipment",e.request_type==="Resources",e.request_type==="Onboarding",e.request_type==="Department Transfer")),a(),p(e.request_type),a(2),p(e.request_items),a(2),p(e.current_step),a(2),s("ngClass",S(21,K,e.status==="Pending",e.status==="Approved",e.status==="Rejected")),a(),p(e.status),a(2),p(w(13,9,e.created_at,"medium")),a(3),p(w(16,12,e.updated_at,"medium")),a(3),h("ngModel",e.status)}}function Q(i,r){if(i&1&&(t(0,"table",13)(1,"thead")(2,"tr")(3,"th"),o(4,"Request Type"),n(),t(5,"th"),o(6,"Items"),n(),t(7,"th"),o(8,"Current Step"),n(),t(9,"th"),o(10,"Status"),n(),t(11,"th"),o(12,"Created At"),n(),t(13,"th"),o(14,"Updated At"),n(),t(15,"th"),o(16,"Status Action"),n()()(),t(17,"tbody"),_(18,H,25,25,"tr",14),n()()),i&2){let e=m();a(18),s("ngForOf",e.workflows)}}function X(i,r){i&1&&(t(0,"div",20),o(1," No workflow items found. "),n())}var G=class i{constructor(r,e,d,l){this.route=r;this.router=e;this.employeeService=d;this.workflowService=l;let c=this.router.getCurrentNavigation()?.extras.state;c&&(this.employeeName=c.employeeName,this.employeeId=c.employeeId)}employeeName="";employeeId=0;error="";loading=!1;workflows=[];statusOptions=["Pending","Approved","Rejected"];statusUpdated=new O;ngOnInit(){this.loadWorkflows()}loadWorkflows(){this.loading=!0,this.workflowService.getWorkflowsByEmployeeId(this.employeeId).subscribe({next:r=>{this.workflows=r,this.loading=!1},error:r=>{this.error=r.message,this.loading=!1}})}updateStatus(r){this.workflowService.updateWorkflowStatus(r.id,r.status).subscribe({next:()=>{this.loadWorkflows(),this.statusUpdated.emit()},error:e=>{this.error=e.message,this.loadWorkflows()}})}goBack(){this.router.navigate(["/employees"])}getRequestItems(r){try{return JSON.parse(r)}catch(e){return console.error("Error parsing request items:",e),null}}static \u0275fac=function(e){return new(e||i)(g(R),g(T),g(D),g(L))};static \u0275cmp=M({type:i,selectors:[["app-workflow"]],outputs:{statusUpdated:"statusUpdated"},decls:13,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],["class","loading-spinner",4,"ngIf"],["class","data-table",4,"ngIf"],["class","no-records",4,"ngIf"],[1,"card-footer"],[1,"d-flex","justify-content-end"],[1,"btn","btn-secondary",3,"click"],[1,"alert","alert-danger"],[1,"loading-spinner"],[1,"icon","fas","fa-spinner","fa-spin"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"form-control",3,"ngModelChange","change","ngModel"],["value","Pending"],["value","Approved"],["value","Rejected"],[1,"no-records"]],template:function(e,d){e&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),o(3),n()(),t(4,"div",2),_(5,Y,2,1,"div",3)(6,$,3,0,"div",4)(7,Q,19,1,"table",5)(8,X,2,0,"div",6),n(),t(9,"div",7)(10,"div",8)(11,"button",9),x("click",function(){return d.goBack()}),o(12,"Back to Employees"),n()()()()),e&2&&(a(3),b("WORKFLOW - ",d.employeeName,""),a(2),s("ngIf",d.error),a(),s("ngIf",d.loading),a(),s("ngIf",!d.loading&&d.workflows.length>0),a(),s("ngIf",!d.loading&&d.workflows.length===0))},dependencies:[q,I,W,j,N,U,B,V,F,A,z],styles:['.card[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto;padding:1.5rem 2rem;background:#fff;border-radius:12px;box-shadow:0 4px 12px #0000001a;display:flex;flex-direction:column}.card-body[_ngcontent-%COMP%]{flex:1}.card-footer[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:1px solid #eee;margin-left:1020px}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:400;color:#222;font-size:1.75rem;border-bottom:1.5px solid #ccc;padding-bottom:.5rem}.card-header[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{position:relative}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:1rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333;margin-top:0}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f3f4f6}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:12px 15px;text-align:left}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1;transition:background-color .2s ease}.status-select[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;font-size:.9rem;width:120px}.status-pending[_ngcontent-%COMP%]{color:#f0ad4e;font-weight:500}.status-approved[_ngcontent-%COMP%]{color:#28a745;font-weight:500}.status-rejected[_ngcontent-%COMP%]{color:#dc3545;font-weight:500}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;border:none;color:#fff;padding:8px 16px;border-radius:6px;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #0000001a}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;transform:translateY(-1px);box-shadow:0 4px 8px #00000026}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;font-size:1.1rem}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:6px;margin-bottom:1rem}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.no-records[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666;font-style:italic}.d-flex[_ngcontent-%COMP%]{display:flex}.justify-content-between[_ngcontent-%COMP%]{justify-content:space-between}.align-items-center[_ngcontent-%COMP%]{align-items:center}.workflow-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;position:relative}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.back-button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#f0f0f0;border:none;border-radius:4px;cursor:pointer;transition:background-color .2s;position:absolute;right:0;top:0}.back-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.error-message[_ngcontent-%COMP%]{padding:12px;background-color:#fee;color:#c00;border-radius:4px;margin-bottom:20px}.loading[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}.workflow-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1fr;gap:20px;background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.workflow-list[_ngcontent-%COMP%]{padding:20px;border-right:1px solid #eee}.workflow-item[_ngcontent-%COMP%]{padding:12px;border-radius:4px;cursor:pointer;transition:background-color .2s;margin-bottom:10px}.workflow-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.workflow-item.selected[_ngcontent-%COMP%]{background-color:#e3f2fd}.workflow-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.workflow-type[_ngcontent-%COMP%]{font-weight:500;color:#333}.workflow-status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:.85em}.workflow-status.pending[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.workflow-status.in_progress[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.workflow-status.completed[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#388e3c}.workflow-date[_ngcontent-%COMP%]{font-size:.85em;color:#666}.workflow-details[_ngcontent-%COMP%]{padding:20px}.section[_ngcontent-%COMP%]{margin-bottom:30px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#333;font-size:1.2em}.status-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.status-control[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #ddd;border-radius:4px;background-color:#fff}.onboarding-steps[_ngcontent-%COMP%]{display:grid;gap:15px}.step-item[_ngcontent-%COMP%]{padding:15px;border:1px solid #eee;border-radius:6px;background-color:#fafafa}.step-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.step-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.step-department[_ngcontent-%COMP%]{color:#666;font-size:.9em}.step-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.step-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.step-status[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:4px 8px;border:1px solid #ddd;border-radius:4px;background-color:#fff}.step-due-date[_ngcontent-%COMP%]{color:#666;font-size:.9em}.document-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 0;border-bottom:1px solid #eee;color:#333}.document-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:10px}.info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#666;min-width:150px}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#333}.info-item[_ngcontent-%COMP%]   span.completed[_ngcontent-%COMP%]{color:#388e3c}.no-workflows[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;background-color:#f5f5f5;border-radius:8px}.requirements-list[_ngcontent-%COMP%]{list-style:none;padding-left:0;margin:.5rem 0;font-size:.9em}.requirements-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.25rem;padding-left:1rem;position:relative}.requirements-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";position:absolute;left:0;color:#666}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.transfer-badge[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;padding:6px 12px;border-radius:20px;font-weight:500;display:inline-block}',".data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:1rem 0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border:1px solid #dee2e6}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:500}.badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:4px;font-weight:400}.form-control[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #dee2e6;border-radius:4px;width:100%}.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}"]})};export{G as WorkflowComponent};
