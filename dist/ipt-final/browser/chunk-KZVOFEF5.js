import{d as n,k as i,n as o,pa as l,q as a,ya as c}from"./chunk-RY5F4FTU.js";var u=class s{constructor(t){this.http=t;let r=localStorage.getItem("token"),e=localStorage.getItem("user");r&&e&&this.currentUserSubject.next(JSON.parse(e))}apiUrl=`${c.apiUrl}/api/auth`;currentUserSubject=new n(null);currentUser$=this.currentUserSubject.asObservable();get currentUser(){return this.currentUserSubject.value}register(t){let r={firstName:t.first_name,lastName:t.last_name,email:t.email,password:t.password};return this.http.post(`${this.apiUrl}/register`,r).pipe(i(e=>{localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),this.currentUserSubject.next(e.user)}))}login(t,r){return this.http.post(`${this.apiUrl}/login`,{email:t,password:r}).pipe(i(e=>{localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),this.currentUserSubject.next(e.user)}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.currentUserSubject.next(null)}isLoggedIn(){return!!this.currentUser}getToken(){return localStorage.getItem("token")}static \u0275fac=function(r){return new(r||s)(a(l))};static \u0275prov=o({token:s,factory:s.\u0275fac,providedIn:"root"})};export{u as a};
